"use strict";(globalThis["webpackChunkofs_2_0"]=globalThis["webpackChunkofs_2_0"]||[]).push([[345],{2345:(e,t,i)=>{i.r(t),i.d(t,{default:()=>V});var s=i(3673),o=i(2323);const a={class:"q-pa-md",container:""},r={class:"q-pa-md row",style:{"margin-left":"15px","margin-right":"15px","padding-left":"0px","border-bottom":"2px solid #DEDEDE"}},l=(0,s._)("div",{class:"col-12 col-md-6",style:{"font-size":"20px"}},[(0,s._)("b",null,"Store Details")],-1),n={class:"col-md text-right q-gutter-md"},p={class:"row"},d={class:"col-12",style:{overflow:"auto","max-height":"77vh"}},c={class:"row q-pa-md bg-white q-gutter-y-xs"},u={class:"col-4 self-center"},y={class:"col-8"},h={class:"self-center full-width no-outline",tabindex:"0"},m=(0,s._)("div",{class:"text-h6"},"Alert",-1);function _(e,t,i,_,b,g){const v=(0,s.up)("q-btn"),S=(0,s.up)("q-field"),k=(0,s.up)("q-input"),D=(0,s.up)("q-select"),T=(0,s.up)("q-checkbox"),w=(0,s.up)("q-form"),f=(0,s.up)("q-card-section"),q=(0,s.up)("q-card-actions"),x=(0,s.up)("q-card"),R=(0,s.up)("q-dialog"),C=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(w,{onSubmit:g.saveStoreDetails,ref:"frmStoreDtl",greedy:""},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",r,[l,(0,s._)("div",n,[0!=e.storeId?((0,s.wg)(),(0,s.j4)(v,{key:0,color:e.editable?"negative":"primary",label:e.editable?"Cancel":"Edit","no-caps":"",onClick:g.toggleEdit},null,8,["color","label","onClick"])):(0,s.kq)("",!0),e.editable||0==e.storeId?((0,s.wg)(),(0,s.j4)(v,{key:1,color:"positive",label:"Save","no-caps":"",type:"submit"})):(0,s.kq)("",!0),(0,s.Wm)(v,{color:"negative",label:"Back to Store List","no-caps":"",onClick:t[0]||(t[0]=t=>e.$router.go(-1))})])])]),(0,s._)("div",p,[(0,s._)("div",d,[(0,s._)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.fields,((t,i)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:i},[void 0!==g.keyToLabel(i)?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[!0!==t.hide?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",u,[(0,s._)("b",null,(0,o.zw)(g.keyToLabel(i).name),1)]),(0,s._)("div",y,["text"===t.type||"password"===t.type||"email"===t.type?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[e.editable?((0,s.wg)(),(0,s.j4)(k,{key:1,dense:"",outlined:"",color:"black",modelValue:g.storeDetails[i],"onUpdate:modelValue":[e=>g.storeDetails[i]=e,e=>g.onInput({key:i,value:e})],type:g.keyToLabel(i).type,maxlength:g.limiter(i),placeholder:g.isLatLong(i),rules:e.editable&&g.keyToLabel(i).isRequired?[e=>!!e||0===e||"Field is required"]:[],"hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue","type","maxlength","placeholder","rules"])):((0,s.wg)(),(0,s.j4)(S,{key:0,outlined:"",dense:"",disable:"",loading:e.storeLoading},{control:(0,s.w5)((()=>[(0,s._)("div",h,(0,o.zw)("hub_dec_pin"==i?g.strToPass(g.storeDetails[i]):g.storeDetails[i]),1)])),_:2},1032,["loading"]))],64)):"select"===g.keyToLabel(i).type?((0,s.wg)(),(0,s.j4)(D,{key:1,outlined:"",dense:"",options:g.keyToLabel(i).option,modelValue:g.storeDetails[i],"onUpdate:modelValue":[e=>g.storeDetails[i]=e,e=>g.onInput({key:i,value:e})],"option-value":g.keyToLabel(i).optionValue,"option-label":g.keyToLabel(i).optionlabel,"emit-value":"","map-options":"","use-input":g.keyToLabel(i).hasFilter,"fill-input":"","hide-selected":"",loading:g.keyToLabel(i).loading,onFilter:(e,t,s)=>{g.filterSelect({input:e,update:t,abort:s},i)},"input-debounce":"0",disable:!e.editable||"City"==g.keyToLabel(i).name&&!g.storeDetails["province"],rules:g.keyToLabel(i).isRequired?[e=>!!e||"Please Select an Item."]:[],"hide-bottom-space":""},null,8,["options","modelValue","onUpdate:modelValue","option-value","option-label","use-input","loading","onFilter","disable","rules"])):"checkbox"===g.keyToLabel(i).type?((0,s.wg)(),(0,s.j4)(T,{key:2,class:"readonly",size:"md",modelValue:g.storeDetails[i],"onUpdate:modelValue":[e=>g.storeDetails[i]=e,e=>g.onInput({key:i,value:e})],tabindex:"0",disable:!e.editable,"toggle-order":"ft","hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue","disable"])):(0,s.kq)("",!0)])],64)):(0,s.kq)("",!0)],64)):(0,s.kq)("",!0)],64)))),128))])])])])),_:1},8,["onSubmit"]),(0,s.Wm)(R,{modelValue:e.alert,"onUpdate:modelValue":t[1]||(t[1]=t=>e.alert=t),persistent:"","transition-show":"scale","transition-hide":"scale",onHide:g.doRedirect},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{class:(0,o.C_)(e.alertColor+" text-white"),style:{width:"300px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[m])),_:1}),(0,s.Wm)(f,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.alertMessage),1)])),_:1}),(0,s.Wm)(q,{align:"right",class:"bg-white text-teal"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(v,{flat:"",label:"OK"},null,512),[[C]])])),_:1})])),_:1},8,["class"])])),_:1},8,["modelValue","onHide"])])}i(5363),i(5663);var b=i(741);const g={name:"StoreDetails",data:()=>({storeId:0,storeDtls:{},editable:!1,brands:{name:"Select Brand"},pc_type:{type:"Select PC Type"},store_region:{type:"Select Store Region"},store_region_type:{type:"Select Store Region Type"},store_type:{type:"Select Store Type"},provinceOptions:[],provinceItems:[],cityOptions:[],cityItems:[],fields:{code:{name:"Store Code",type:"text",isRequired:!0},store_name:{name:"Store Name",type:"text",isRequired:!0},hostname:{name:"Hostname",type:"text",isRequired:!1,hide:!0},address:{name:"Address",type:"text",isRequired:!0},brand_id:{name:"Brand",type:"select",isRequired:!1,hide:!0},province:{name:"Province",type:"select",isRequired:!0,hasFilter:!0},city:{name:"City",type:"select",isRequired:!0,hasFilter:!0},profit_center_type:{name:"PC Type",type:"select",isRequired:!1,hide:!0},region:{name:"Store Region",type:"select",isRequired:!1,hide:!0},region_type:{name:"Store Region Type",type:"select",isRequired:!1,hide:!0},store_type:{name:"Store Type",type:"select",isRequired:!1,hide:!0},contact_numbers:{name:"Contact Numbers",type:"text",isRequired:!0},contact_emails:{name:"Email",type:"email",isRequired:!0},remarks:{name:"Remarks",type:"text",isRequired:!0},y:{name:"Latitude",type:"text",isRequired:!0},x:{name:"Longitude",type:"text",isRequired:!0},receipt_message:{name:"Receipt footer Msg.",type:"text",hide:!0},delivery_number:{name:"Digit convert no.",type:"text",hide:!0},hub_dec_pin:{name:"Hub Declaration Pin",type:"password",isRequired:!0},is_active:{name:"Active",type:"checkbox"},is_24hours:{name:"24 Hours",type:"checkbox"},is_grab_express:{name:"Grab Express",type:"checkbox"},is_mds_rider:{name:"RMS Rider",type:"checkbox"},printer_ip_address:{name:"Printer IP Address",type:"text",hide:!0},paymaya_public_token:{name:"Paymaya Public Token",type:"text",hide:!0},paymaya_secret_token:{name:"Paymaya Private Token",type:"text",hide:!0},gcash_qr_code:{name:"GCash QR Code",type:"text",hide:!0}},alert:!1,alertMessage:"",alertColor:"bg-green"}),async beforeMount(){this.reset(),this.storeDtls=this.store,await this.storeDetailSources({store_id:this.storeId}),await this.getProvinces().then((()=>{this.provinceItems=this.provinces})),"undefined"!==typeof this.$route.params.id?(this.storeId=this.$route.params.id,await this.storeDetail({store_id:this.$route.params.id}).then((async()=>{this.storeDtls=this.store;var e=this.provinceItems.find((e=>e.province_name===this.storeDtls.province)).province_id;await this.getCities({province_id:e}).then((()=>{this.cityItems=this.cities,this.cityOptions=this.cityItems}))}))):this.editable=!0},computed:{...(0,b.Se)("StoreManagement",{store:"GET_STORE",storeLoading:"GET_STORE_LOADING",store_sources:"GET_STORE_SOURCES",provinces:"GET_PROVINCES",cities:"GET_CITIES",provincesLoading:"GET_PROVINCES_LOADING",citiesLoading:"GET_CITIES_LOADING"}),storeDetails(){return{...this.storeDtls}},brandsOption(){var e=this.store_sources,t=[{id:0,name:"Select Brand",disable:!0}],i=t.concat(e.brands);return i},pc_typesOption(){var e=this.store_sources,t=[{id:0,type:"Select PC Type",disable:!0}],i=t.concat(e.pc_type);return i},store_regionsOption(){var e=this.store_sources,t=[{id:0,type:"Select Store Region",disable:!0}],i=t.concat(e.store_region);return i},store_region_typesOption(){var e=this.store_sources,t=[{id:0,type:"Select Store Region Type",disable:!0}],i=t.concat(e.store_region_type);return i},store_typesOption(){var e=this.store_sources,t=[{id:0,type:"Select Store Type",disable:!0}],i=t.concat(e.store_type);return i}},methods:{...(0,b.nv)("StoreManagement",["storeDetail","storeDetailSources","getProvinces","getCities","createStoreDetail","updateStoreDetail","reset"]),...(0,b.OI)("StoreManagement",["SET_STORE_DETAIL"]),async onInput({key:e,value:t}){if(this.SET_STORE_DETAIL({key:e,value:t}),this.storeDtls=this.store,"province"===e){var i=this.provinceItems.find((e=>e.province_name===t)).province_id;await this.getCities({province_id:i}).then((()=>{this.cityItems=this.cities,this.cityOptions=this.cityItems,this.SET_STORE_DETAIL({key:"city",value:""}),this.storeDtls=this.store}))}},async toggleEdit(){this.editable=!this.editable,this.editable||(await this.storeDetail({store_id:this.$route.params.id}).then((()=>{this.storeDtls=this.store})),await this.storeDetailSources({store_id:this.$route.params.id}))},keyToLabel(e){let t=this.fields[e];if(void 0!==t&&"select"===t.type)switch(e){case"brand_id":t.option=this.brandsOption,t.optionlabel="name",t.optionValue="id";break;case"profit_center_type":t.option=this.pc_typesOption,t.optionlabel="type",t.optionValue="id";break;case"region":t.option=this.store_regionsOption,t.optionlabel="type",t.optionValue="id";break;case"region_type":t.option=this.store_region_typesOption,t.optionlabel="type",t.optionValue="id";break;case"store_type":t.option=this.store_typesOption,t.optionlabel="type",t.optionValue="id";break;case"province":t.option=this.provinceOptions,t.loading=this.provincesLoading,t.optionlabel="province_name",t.optionValue="province_name";break;case"city":t.option=this.cityOptions,t.loading=this.citiesLoading,t.optionlabel="municipality_name",t.optionValue="municipality_name";break}return t},limiter(e){return"hub_dec_pin"==e?4:"code"==e?10:""},isLatLong(e){return"x"==e?"120.984222":"y"==e?"14.599512":""},filterSelect({input:e,update:t,abort:i},s){t(""!==e?()=>{const t=e.toLowerCase();"province"===s?this.provinceOptions=this.provinceItems.filter((e=>e.province_name.toString().toLowerCase().startsWith(t))):"city"===s&&(this.cityOptions=this.cityItems.filter((e=>e.municipality_name.toString().toLowerCase().startsWith(t))))}:()=>{"province"===s?this.provinceOptions=this.provinceItems:"city"===s&&(this.cityOptions=this.cityItems)})},async saveStoreDetails(){this.storeId>0?this.updateStoreDetail({store_id:this.$route.params.id}).then((async e=>{e?(this.alert=!0,this.alertColor="bg-green",this.alertMessage="Successfully Updated!"):(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Failed to save, please try again.")})):this.createStoreDetail().then((async e=>{e?(this.alert=!0,this.alertColor="bg-green",this.alertMessage="Successfully Created!"):(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Failed to save, please try again.")}))},strToPass(e){return e.toString().replace(/./g,"•")},doRedirect(){"bg-green"==this.alertColor&&this.$router.push({path:"/store-manage"})}}};var v=i(4260),S=i(5269),k=i(8240),D=i(6115),T=i(4842),w=i(2448),f=i(5735),q=i(6778),x=i(151),R=i(5589),C=i(9367),I=i(677),L=i(7518),O=i.n(L);const E=(0,v.Z)(g,[["render",_]]),V=E;O()(g,"components",{QForm:S.Z,QBtn:k.Z,QField:D.Z,QInput:T.Z,QSelect:w.Z,QCheckbox:f.Z,QDialog:q.Z,QCard:x.Z,QCardSection:R.Z,QCardActions:C.Z}),O()(g,"directives",{ClosePopup:I.Z})}}]);
(globalThis["webpackChunkofs_2_0"]=globalThis["webpackChunkofs_2_0"]||[]).push([[166],{2101:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>W});var a=t(9835),l=t(6970);const o={style:{"max-height":"90vh",overflow:"auto"}},i=(0,a.uE)('<div class="q-pa-md row" style="margin-left:15px;margin-right:15px;padding-left:0px;border-bottom:2px solid #DEDEDE;"><div class="col-6"><div style="font-size:20px;"><b>Customer Receive Time</b></div></div><div class="col-6"><div style="font-size:15px;text-align:right;"><b>Date: </b> Today</div></div></div><div style="margin-left:15px;margin-top:15px;font-size:15px;"><b>Filters:</b></div>',2),n={class:"row items-start q-pa-md"},r={class:"col-xs-12 col-sm-6 col-md-2 gutter"},m={class:"col-xs-12 col-sm-6 col-md-2 gutter"},d={class:"col-xs-12 col-sm-6 col-md-1 gutter"},c={class:"col-xs-12 col-sm-6 col-md-1 gutter"},u={class:"col-xs-12 col-sm-6 col-md-2 gutter"},j={class:"gutter"},_={class:"q-pa-md"},g=(0,a._)("div",{class:"text-h6"},"Alert",-1);function h(e,s,t,h,p,v){const b=(0,a.up)("q-input"),f=(0,a.up)("q-select"),x=(0,a.up)("q-btn"),k=(0,a.up)("q-table"),y=(0,a.up)("q-card-section"),w=(0,a.up)("q-card-actions"),D=(0,a.up)("q-card"),F=(0,a.up)("q-dialog"),T=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",o,[i,(0,a._)("div",n,[(0,a._)("div",r,[(0,a.Wm)(b,{"bg-color":"white",outlined:"",type:"date",modelValue:e.startDate,"onUpdate:modelValue":s[0]||(s[0]=s=>e.startDate=s),hint:"Start date *",dense:"",style:{"margin-right":"8px"}},null,8,["modelValue"])]),(0,a._)("div",m,[(0,a.Wm)(b,{"bg-color":"white",outlined:"",type:"date",modelValue:e.endDate,"onUpdate:modelValue":s[1]||(s[1]=s=>e.endDate=s),min:e.minDate,max:e.maxDate,hint:"End date *",dense:"",style:{"margin-right":"8px"}},null,8,["modelValue","min","max"])]),(0,a._)("div",d,[(0,a.Wm)(f,{"bg-color":"white",outlined:"",options:e.hourRangeFrom,modelValue:e.hourFrom,"onUpdate:modelValue":s[2]||(s[2]=s=>e.hourFrom=s),hint:"Hour range",label:"From",dense:"",style:{"margin-right":"8px"}},null,8,["options","modelValue"])]),(0,a._)("div",c,[(0,a.Wm)(f,{"bg-color":"white",outlined:"",options:e.hourRangeTo,modelValue:e.hourTo,"onUpdate:modelValue":s[3]||(s[3]=s=>e.hourTo=s),hint:"Hour range",label:"To",dense:"",style:{"margin-right":"8px"}},null,8,["options","modelValue"])]),(0,a._)("div",u,[(0,a.Wm)(f,{"bg-color":"white",outlined:"",options:e.promisedTimeOptions,modelValue:e.promisedTime,"onUpdate:modelValue":s[4]||(s[4]=s=>e.promisedTime=s),hint:"Promised time",label:"Promised time",dense:"",style:{"margin-right":"8px"}},null,8,["options","modelValue"])]),(0,a._)("div",j,[(0,a.Wm)(x,{color:"primary","icon-right":"search",label:"Search","no-caps":"",onClick:e.searchFilter,style:{"margin-right":"8px"}},null,8,["onClick"]),(0,a.Wm)(x,{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:e.exportFiltered,style:{"margin-right":"8px"}},null,8,["onClick"])])]),(0,a._)("div",null,[(0,a._)("div",_,[(0,a.Wm)(k,{class:(0,l.C_)(e.scroll),id:"test",pagination:e.initialPagination,color:"primary",columns:e.columns,rows:e.rows,"row-key":"name",ref:"tb",loading:e.loading},null,8,["class","pagination","columns","rows","loading"])])]),(0,a.Wm)(F,{modelValue:e.dialog,"onUpdate:modelValue":s[5]||(s[5]=s=>e.dialog=s),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{class:"bg-red text-white",style:{width:"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[g])),_:1}),(0,a.Wm)(y,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Start date and End date are required. ")])),_:1}),(0,a.Wm)(w,{align:"right",class:"bg-white text-black"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(x,{flat:"",label:"OK"},null,512),[[T]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var p=t(3100),v=t(6646),b=t(3878),f=t.n(b);function x(e,s){let t=void 0!==s?s(e):e;return t=void 0===t||null===t?"":String(t),t=t.split('"').join('""'),`"${t}"`}const k=(0,a.aZ)({name:"CustomerReceiveTime",async beforeMount(){},computed:{...(0,p.Se)("CustomerReceiveTime",{crtData:"GET_CUSTOMER_RECEIVE_TIME",loading:"GET_LOADING"}),...(0,p.Se)("Auth",{user:"GET_PROFILE"})},data(){return{initialPagination:{sortBy:"desc",descending:!0,rowsPerPage:50},columns:[{name:"hour",label:"Hour",field:"hour",align:"center"},{name:"packaging_sales",label:"Packaging",field:"packaging_sales",align:"center"},{name:"net_sales",label:"Net",field:"net_sales",align:"center"},{name:"total_sales",label:"Sales",field:"total_sales",align:"center"},{name:"avg_check",label:"Avg. Check",field:"avg_check",align:"center"},{name:"all_avg_time",label:"All Avg. Time",field:"all_avg_time",align:"center"},{name:"total_orders",label:"TC",field:"total_orders",align:"center"},{name:"avg_less_90",label:"Avg. Less 90mins",field:"avg_less_90",align:"center"},{name:"less_90_tc",label:"Less 90mins",field:"less_90_tc",align:"center"},{name:"less_90_",label:"Less 90mins %",field:"less_90_",align:"center"},{name:"to_90_120_tc",label:"90-120mins TC",field:"to_90_120_tc",align:"center"},{name:"to_90_120_",label:"90-120mins %",field:"to_90_120_",align:"center"},{name:"to_120_180",label:"120-180mins TC",field:"to_120_180",align:"center"},{name:"to_120_180_",label:"120-180mins %",field:"to_120_180_",align:"center"},{name:"over_180_tc",label:"Over 180 TC",field:"over_180_tc",align:"center"},{name:"over_180_",label:"Over 180 %",field:"over_180_",align:"center"}],rows:[],hourRangeFrom:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],hourRangeTo:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],promisedTimeOptions:["All","90","120","180"],hourFrom:0,hourTo:23,promisedTime:"All",startDate:"",endDate:"",minDate:"",maxDate:"",dialog:!1,position:"top",scroll:""}},methods:{...(0,p.nv)("CustomerReceiveTime",["customerReceiveTime"]),async customerReceiveTimeTable(){var e=this.crtData;this.rows=e},strtotime(e){var s=f()(e,"HH:mm:ss").format("X");return"Invalid date"==s?0:s},searchFilter(){""==this.startDate||""==this.endDate?(this.dialog=!0,this.rows=[]):this.customerReceiveTime({startDate:this.startDate,endDate:this.endDate,hourFrom:this.hourFrom,hourTo:this.hourTo,promisedTime:this.promisedTime}).then((()=>{var e=this.crtData,s=0,t=0,a=0,l=0,o=0,i=0,n=0,r=0,m=0,d=0,c=0;e.forEach((e=>{s+=parseFloat(e.packaging_sales),t+=parseFloat(e.net_sales),a+=parseFloat(e.total_sales),l+=parseFloat(e.avg_check),o+=parseFloat(this.strtotime(e.all_avg_time)),i+=parseFloat(e.total_orders),n+=parseFloat(this.strtotime(e.avg_less_90)),r+=parseFloat(e.less_90_tc),parseFloat(e.less_90_),m+=parseFloat(e.to_90_120_tc),parseFloat(e.to_90_120_),d+=parseFloat(e.to_120_180),parseFloat(e.to_120_180),c+=parseFloat(e.over_180_tc),parseFloat(e.over_180_)}));var u=[{hour:"",packaging_sales:s.toFixed(2),net_sales:t.toFixed(2),total_sales:a.toFixed(2),avg_check:l.toFixed(2),all_avg_time:"Invalid date"==f()(o/i*1e3).format("HH:mm:ss")?"0":f()(o/i*1e3).format("HH:mm:ss"),total_orders:i,avg_less_90:"Invalid date"==f()(n/i*1e3).format("HH:mm:ss")?"0":f()(n/i*1e3).format("HH:mm:ss"),less_90_tc:r,less_90_:"NaN%"==(r/i*100).toFixed(2)+"%"?"0":(r/i*100).toFixed(2)+"%",to_90_120_tc:m,to_90_120_:"NaN%"==(m/i*100).toFixed(2)+"%"?"0":(m/i*100).toFixed(2)+"%",to_120_180:d,to_120_180_:"NaN%"==(d/i*100).toFixed(2)+"%"?"0":(d/i*100).toFixed(2)+"%",over_180_tc:c,over_180_:"NaN%"==(c/i*100).toFixed(2)+"%"?"0":(c/i*100).toFixed(2)+"%"}],j=e.concat(u);this.rows=j}))},exportFiltered(){var e=new Date;e.setDate(e.getDate());var s=e.toISOString().slice(0,10),t=this.user,a=t.store_name+"/CustomerReceiveTime/"+s;const l=[this.columns.map((e=>x(e.label)))].concat(this.$refs.tb.filteredSortedRows.map((e=>this.columns.map((s=>x("function"===typeof s.field?s.field(e):e[void 0===s.field?s.name:s.field],s.format))).join(",")))).join("\r\n");(0,v.Z)(a+".csv",l,"text/csv")}},watch:{startDate(){if(""==this.startDate)this.minDate="",this.maxDate="";else{this.minDate=this.startDate;var e=new Date(this.startDate);e.setDate(e.getDate()+31),this.maxDate=e.toISOString().slice(0,10)}}}});var y=t(1639),w=t(6611),D=t(2259),F=t(4455),T=t(7580),z=t(2074),C=t(4458),E=t(3190),V=t(1821),R=t(2146),q=t(9984),S=t.n(q);const O=(0,y.Z)(k,[["render",h]]),W=O;S()(k,"components",{QInput:w.Z,QSelect:D.Z,QBtn:F.Z,QTable:T.Z,QDialog:z.Z,QCard:C.Z,QCardSection:E.Z,QCardActions:V.Z}),S()(k,"directives",{ClosePopup:R.Z})},6700:(e,s,t)=>{var a={"./af":202,"./af.js":202,"./ar":6314,"./ar-dz":5666,"./ar-dz.js":5666,"./ar-kw":6591,"./ar-kw.js":6591,"./ar-ly":7900,"./ar-ly.js":7900,"./ar-ma":5667,"./ar-ma.js":5667,"./ar-sa":4092,"./ar-sa.js":4092,"./ar-tn":1379,"./ar-tn.js":1379,"./ar.js":6314,"./az":1699,"./az.js":1699,"./be":8988,"./be.js":8988,"./bg":7437,"./bg.js":7437,"./bm":7947,"./bm.js":7947,"./bn":2851,"./bn-bd":4905,"./bn-bd.js":4905,"./bn.js":2851,"./bo":7346,"./bo.js":7346,"./br":1711,"./br.js":1711,"./bs":3706,"./bs.js":3706,"./ca":112,"./ca.js":112,"./cs":6406,"./cs.js":6406,"./cv":1853,"./cv.js":1853,"./cy":9766,"./cy.js":9766,"./da":6836,"./da.js":6836,"./de":9320,"./de-at":4904,"./de-at.js":4904,"./de-ch":6710,"./de-ch.js":6710,"./de.js":9320,"./dv":3274,"./dv.js":3274,"./el":286,"./el.js":286,"./en-au":143,"./en-au.js":143,"./en-ca":237,"./en-ca.js":237,"./en-gb":2428,"./en-gb.js":2428,"./en-ie":3349,"./en-ie.js":3349,"./en-il":3764,"./en-il.js":3764,"./en-in":7809,"./en-in.js":7809,"./en-nz":9851,"./en-nz.js":9851,"./en-sg":5594,"./en-sg.js":5594,"./eo":4483,"./eo.js":4483,"./es":2184,"./es-do":5777,"./es-do.js":5777,"./es-mx":9356,"./es-mx.js":9356,"./es-us":8496,"./es-us.js":8496,"./es.js":2184,"./et":7578,"./et.js":7578,"./eu":2092,"./eu.js":2092,"./fa":5927,"./fa.js":5927,"./fi":171,"./fi.js":171,"./fil":2416,"./fil.js":2416,"./fo":9937,"./fo.js":9937,"./fr":5172,"./fr-ca":8249,"./fr-ca.js":8249,"./fr-ch":7541,"./fr-ch.js":7541,"./fr.js":5172,"./fy":7907,"./fy.js":7907,"./ga":6361,"./ga.js":6361,"./gd":2282,"./gd.js":2282,"./gl":2630,"./gl.js":2630,"./gom-deva":680,"./gom-deva.js":680,"./gom-latn":6220,"./gom-latn.js":6220,"./gu":6272,"./gu.js":6272,"./he":5540,"./he.js":5540,"./hi":6067,"./hi.js":6067,"./hr":9669,"./hr.js":9669,"./hu":3396,"./hu.js":3396,"./hy-am":6678,"./hy-am.js":6678,"./id":4812,"./id.js":4812,"./is":4193,"./is.js":4193,"./it":7863,"./it-ch":959,"./it-ch.js":959,"./it.js":7863,"./ja":1809,"./ja.js":1809,"./jv":8657,"./jv.js":8657,"./ka":3290,"./ka.js":3290,"./kk":8418,"./kk.js":8418,"./km":7687,"./km.js":7687,"./kn":1375,"./kn.js":1375,"./ko":2641,"./ko.js":2641,"./ku":3518,"./ku.js":3518,"./ky":5459,"./ky.js":5459,"./lb":1978,"./lb.js":1978,"./lo":6915,"./lo.js":6915,"./lt":8948,"./lt.js":8948,"./lv":2548,"./lv.js":2548,"./me":8608,"./me.js":8608,"./mi":333,"./mi.js":333,"./mk":1876,"./mk.js":1876,"./ml":999,"./ml.js":999,"./mn":4098,"./mn.js":4098,"./mr":6111,"./mr.js":6111,"./ms":3717,"./ms-my":265,"./ms-my.js":265,"./ms.js":3717,"./mt":8980,"./mt.js":8980,"./my":6895,"./my.js":6895,"./nb":5348,"./nb.js":5348,"./ne":1493,"./ne.js":1493,"./nl":4419,"./nl-be":5576,"./nl-be.js":5576,"./nl.js":4419,"./nn":6907,"./nn.js":6907,"./oc-lnc":2321,"./oc-lnc.js":2321,"./pa-in":9239,"./pa-in.js":9239,"./pl":7627,"./pl.js":7627,"./pt":5703,"./pt-br":1623,"./pt-br.js":1623,"./pt.js":5703,"./ro":2747,"./ro.js":2747,"./ru":4420,"./ru.js":4420,"./sd":2148,"./sd.js":2148,"./se":2461,"./se.js":2461,"./si":2783,"./si.js":2783,"./sk":3306,"./sk.js":3306,"./sl":341,"./sl.js":341,"./sq":2768,"./sq.js":2768,"./sr":2451,"./sr-cyrl":3371,"./sr-cyrl.js":3371,"./sr.js":2451,"./ss":8812,"./ss.js":8812,"./sv":3820,"./sv.js":3820,"./sw":3615,"./sw.js":3615,"./ta":2869,"./ta.js":2869,"./te":2044,"./te.js":2044,"./tet":5861,"./tet.js":5861,"./tg":6999,"./tg.js":6999,"./th":1772,"./th.js":1772,"./tk":7443,"./tk.js":7443,"./tl-ph":9786,"./tl-ph.js":9786,"./tlh":2812,"./tlh.js":2812,"./tr":6952,"./tr.js":6952,"./tzl":9573,"./tzl.js":9573,"./tzm":5990,"./tzm-latn":6961,"./tzm-latn.js":6961,"./tzm.js":5990,"./ug-cn":2610,"./ug-cn.js":2610,"./uk":9498,"./uk.js":9498,"./ur":3970,"./ur.js":3970,"./uz":9006,"./uz-latn":26,"./uz-latn.js":26,"./uz.js":9006,"./vi":9962,"./vi.js":9962,"./x-pseudo":8407,"./x-pseudo.js":8407,"./yo":1962,"./yo.js":1962,"./zh-cn":8909,"./zh-cn.js":8909,"./zh-hk":4014,"./zh-hk.js":4014,"./zh-mo":996,"./zh-mo.js":996,"./zh-tw":6327,"./zh-tw.js":6327};function l(e){var s=o(e);return t(s)}function o(e){if(!t.o(a,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return a[e]}l.keys=function(){return Object.keys(a)},l.resolve=o,e.exports=l,l.id=6700}}]);
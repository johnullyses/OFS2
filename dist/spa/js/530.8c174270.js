"use strict";(self["webpackChunkofs_2_0"]=self["webpackChunkofs_2_0"]||[]).push([[530],{530:(e,s,t)=>{t.r(s),t.d(s,{default:()=>W});var l=t(3673),o=t(2323);const i={class:"q-pa-md",container:""},r={class:"q-pa-md row",style:{"margin-left":"15px","margin-right":"15px","padding-left":"0px","border-bottom":"2px solid #DEDEDE"}},a=(0,l._)("div",{class:"col-6"},[(0,l._)("div",{style:{"font-size":"20px"}},[(0,l._)("b",null,"User Store Link")])],-1),n={class:"col-6"},u={style:{"font-size":"15px","text-align":"right"}},d=(0,l._)("b",null,"Date: ",-1),c={class:"row items-start q-pa-md"},p={class:"col-md-6 col-sm-6 col-xs-12 q-pa-xs"},g={class:"col-md-6 col-sm-6 col-xs-12 q-pa-xs"},h={class:"row q-pa-md"},m={class:"col-md-4 col-sm-6 col-xs-12 q-pa-xs gutter"},_=(0,l._)("div",{class:"text-h6"},"Alert",-1);function S(e,s,t,S,L,f){const w=(0,l.up)("q-select"),U=(0,l.up)("q-space"),v=(0,l.up)("q-btn"),b=(0,l.up)("q-card-section"),q=(0,l.up)("q-card-actions"),x=(0,l.up)("q-card"),C=(0,l.up)("q-dialog"),E=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",null,[(0,l._)("div",r,[a,(0,l._)("div",n,[(0,l._)("div",u,[d,(0,l.Uk)((0,o.zw)(this.todate),1)])])]),(0,l._)("div",c,[(0,l._)("div",p,[(0,l.Wm)(w,{ref:"qsUsers","bg-color":"white",outlined:"",options:e.userOptions,modelValue:e.userAssign,"onUpdate:modelValue":[s[0]||(s[0]=s=>e.userAssign=s),f.clearFilterUsers],"option-value":"id","option-label":"name",hint:"Select Users",label:"Select Users","use-input":"",multiple:"",counter:"","use-chips":"","input-debounce":"0",onFilter:f.filterUsers,loading:e.usersListLoading,dense:""},null,8,["options","modelValue","onFilter","onUpdate:modelValue","loading"])]),(0,l._)("div",g,[(0,l.Wm)(w,{"bg-color":"white",outlined:"",options:e.storesList,modelValue:e.store,"onUpdate:modelValue":s[1]||(s[1]=s=>e.store=s),loading:e.storesListLoading,"option-value":"store_id","option-label":"store_name",hint:"Select Store",label:"Select Store",dense:""},null,8,["options","modelValue","loading"])])]),(0,l._)("div",h,[(0,l.Wm)(U),(0,l._)("div",m,[(0,l.Wm)(v,{style:{width:"100%"},color:"primary","icon-right":"assignment_turned_in",label:"Assign","no-caps":"",onClick:f.assign},null,8,["onClick"])])]),(0,l.Wm)(C,{modelValue:e.alert,"onUpdate:modelValue":s[2]||(s[2]=s=>e.alert=s),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:(0,o.C_)(e.alertColor+" text-white"),style:{width:"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[_])),_:1}),(0,l.Wm)(b,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.alertMessage),1)])),_:1}),(0,l.Wm)(q,{align:"right",class:"bg-white text-teal"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(v,{flat:"",label:"OK"},null,512),[[E]])])),_:1})])),_:1},8,["class"])])),_:1},8,["modelValue"])])])}var L=t(3617),f=t(1959),w=new Date,U=w.getFullYear()+"-"+(w.getMonth()+1).toString().padStart(2,"0")+"-"+w.getDate().toString().padStart(2,"0");const v={name:"UserStoreLink",async beforeMount(){await this.storeList(),await this.userList().then((()=>{var e=this.usersList;this.users=e.filter((function(e){return!e.role_id||e.role_id<3}))}))},data:()=>({todate:U,userAssign:(0,f.iH)(null),users:[],userOptions:[],store:"",alert:!1,alertMessage:"",alertColor:"bg-green"}),computed:{...(0,L.Se)("Auth",{user:"GET_PROFILE"}),...(0,L.Se)("UserStoreLink",{usersList:"GET_USER_LIST",usersListLoading:"GET_USER_LIST_LOADING",storesList:"GET_STORE_LIST",storesListLoading:"GET_STORE_LIST_LOADING"})},methods:{...(0,L.nv)("UserStoreLink",["assignUserToStore","storeList","userList"]),filterUsers(e,s){s(""!==e?()=>{const s=e.toLowerCase();this.userOptions=this.users.filter((e=>e.name.toString().toLowerCase().indexOf(s)>-1))}:()=>{this.userOptions=this.users})},clearFilterUsers(){this.$refs.qsUsers.updateInputValue(""),this.$refs.qsUsers.$el.querySelector("input").focus()},assign(){this.assignUserToStore({user:this.userAssign,store:this.store}).then((async e=>{e?(this.alert=!0,this.alertColor="bg-green",this.alertMessage="User Successfully Assigned!"):(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Failed to save, please try again.")}))}}};var b=t(4260),q=t(2448),x=t(2025),C=t(8240),E=t(6778),T=t(151),k=t(5589),y=t(9367),A=t(677),O=t(7518),V=t.n(O);const D=(0,b.Z)(v,[["render",S]]),W=D;V()(v,"components",{QSelect:q.Z,QSpace:x.Z,QBtn:C.Z,QDialog:E.Z,QCard:T.Z,QCardSection:k.Z,QCardActions:y.Z}),V()(v,"directives",{ClosePopup:A.Z})}}]);
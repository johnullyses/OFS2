"use strict";(globalThis["webpackChunkofs_2_0"]=globalThis["webpackChunkofs_2_0"]||[]).push([[492],{2492:(e,l,t)=>{t.r(l),t.d(l,{default:()=>I});var a=t(3673),i=t(2323);const s={class:"q-pa-md",style:{overflow:"auto","max-height":"90vh","min-height":"90vh"},container:""},o=(0,a.uE)('<div class="q-pa-md row" style="margin-left:15px;padding-left:0px;border-bottom:2px solid #dedede;"><div class="col-6"><div style="font-size:20px;"><b>Billable</b></div></div><div class="col-6"><div style="font-size:15px;text-align:right;"><b>Date: </b> Today </div></div></div><div style="margin-left:15px;margin-top:15px;font-size:15px;"><b>Filters:</b></div>',2),n={class:"q-pr-md"},d={class:"row items-start q-pa-md"},r={class:"col-md-4 col-sm-6 col-xs-12 q-pa-xs"},c={class:"col-md-4 col-sm-6 col-xs-12 q-pa-xs"},m={class:"col-md-4 col-sm-6 col-xs-12 q-pa-xs"},u={class:"col-md-4 col-sm-6 col-xs-12 q-pa-xs"},p={class:"col-md-4 col-sm-6 col-xs-12 q-pa-xs"},h={class:"col-md-2 col-sm-6 col-xs-12 q-pa-xs"},b={class:"col-md-2 col-sm-6 col-xs-12 q-pa-xs"},g={class:"q-pl-md"},_=(0,a._)("div",{class:"text-h6"},"Alert",-1);function v(e,l,t,v,D,f){const x=(0,a.up)("q-select"),y=(0,a.up)("q-input"),w=(0,a.up)("q-btn"),S=(0,a.up)("q-table"),q=(0,a.up)("q-card-section"),V=(0,a.up)("q-card-actions"),A=(0,a.up)("q-card"),C=(0,a.up)("q-dialog"),O=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",null,[o,(0,a._)("div",n,[(0,a._)("div",d,[(0,a._)("div",r,[(0,a.Wm)(x,{"bg-color":"white",outlined:"",options:e.sourcesOption,modelValue:e.source,"onUpdate:modelValue":l[0]||(l[0]=l=>e.source=l),"option-value":"id","option-label":"source_name",hint:"Source",label:"All order sources",dense:""},null,8,["options","modelValue"])]),(0,a._)("div",c,[(0,a.Wm)(x,{"bg-color":"white",outlined:"",options:e.paymentOption,modelValue:e.payment,"onUpdate:modelValue":l[1]||(l[1]=l=>e.payment=l),"option-value":"id","option-label":"payment_type",hint:"Payment",label:"All order sources",dense:""},null,8,["options","modelValue"])]),(0,a._)("div",m,[(0,a.Wm)(x,{"bg-color":"white",outlined:"",options:e.methodOption,modelValue:e.method,"onUpdate:modelValue":l[2]||(l[2]=l=>e.method=l),"option-value":"id","option-label":"name",hint:"Method",label:"All order sources",dense:""},null,8,["options","modelValue"])]),(0,a._)("div",u,[(0,a.Wm)(y,{"bg-color":"white",outlined:"",type:"date",hint:"Start date *",modelValue:e.startDate,"onUpdate:modelValue":l[3]||(l[3]=l=>e.startDate=l),dense:""},null,8,["modelValue"])]),(0,a._)("div",p,[(0,a.Wm)(y,{"bg-color":"white",outlined:"",type:"date",hint:"End date *",min:e.minDate,max:e.maxDate,modelValue:e.endDate,"onUpdate:modelValue":l[4]||(l[4]=l=>e.endDate=l),dense:""},null,8,["min","max","modelValue"])]),(0,a._)("div",h,[(0,a.Wm)(w,{style:{width:"100%"},color:"primary","icon-right":"search",label:"Search","no-caps":"",onClick:e.searchFilter},null,8,["onClick"])]),(0,a._)("div",b,[(0,a.Wm)(w,{style:{width:"100%"},color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:e.exportFiltered},null,8,["onClick"])])]),(0,a._)("div",null,[(0,a._)("div",g,[(0,a.Wm)(S,{class:(0,i.C_)(e.scroll),id:"test","hide-pagination":!0,loading:e.loading,color:"primary",columns:e.columns,rows:e.rows,"row-key":"name",ref:"tb"},null,8,["class","loading","columns","rows"])])])]),(0,a.Wm)(C,{modelValue:e.dialog,"onUpdate:modelValue":l[5]||(l[5]=l=>e.dialog=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{class:"bg-red text-white",style:{width:"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[_])),_:1}),(0,a.Wm)(q,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Start date and End date are required. ")])),_:1}),(0,a.Wm)(V,{align:"right",class:"bg-white text-black"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(w,{flat:"",label:"OK"},null,512),[[O]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}var D=t(741),f=t(2841);function x(e,l){let t=void 0!==l?l(e):e;return t=void 0===t||null===t?"":String(t),t=t.split('"').join('""'),`"${t}"`}const y=(0,a.aZ)({name:"Billable",async beforeMount(){await this.allSources()},computed:{...(0,D.Se)("BillableItems",{billable:"GET_BILLABLE_ITEMS",sources:"GET_SOURCES",loading:"GET_LOADING"}),...(0,D.Se)("Auth",{user:"GET_PROFILE"}),sourcesOption(){var e=this.sources;return e.sources},paymentOption(){var e=this.sources;return e.payment},methodOption(){var e=this.sources;return e.method}},data(){return{initialPagination:{sortBy:"desc",descending:!0,rowsPerPage:50},columns:[{name:"store_code",label:"Store Code",field:"store_code",align:"center"},{name:"store_name",label:"Store Name",field:"store_name",align:"center"},{name:"voice_tc",label:"Voice TC",field:"voice_tc",align:"center"},{name:"digital_tc",label:"Digital TC",field:"digital_tc",align:"center"},{name:"digital_aor_tc",label:"Digital AOR TC",field:"digital_aor_tc",align:"center"},{name:"digital_aa_tc",label:"Digital Agent Assisted TC",field:"digital_aa_tc",align:"center"},{name:"voice_billable_sales",label:"Voice Billable Sales",field:"voice_billable_sales",align:"center"},{name:"digital_billable_sales",label:"Digital Billable Sales",field:"digital_billable_sales",align:"center"},{name:"digital_aor_billable_sales",label:"Digital AOR Billable Sales",field:"digital_aor_billable_sales",align:"center"},{name:"digital_aa_billable_sales",label:"Digital Agent Assisted Digital Sales",field:"digital_aa_billable_sales",align:"center"}],rows:[],searchText:"",startDate:"",endDate:"",source:{source_name:"All"},payment:{payment_type:"All"},method:{name:"All"},dialog:!1,position:"top",minDate:"",maxDate:"",scroll:""}},methods:{...(0,D.nv)("BillableItems",["billableSales","allSources"]),exportFiltered(){var e=new Date;e.setDate(e.getDate());var l=e.toISOString().slice(0,10),t=this.user,a=t.store_name+"/Billable/"+l;const i=[this.columns.map((e=>x(e.label)))].concat(this.$refs.tb.filteredSortedRows.map((e=>this.columns.map((l=>x("function"===typeof l.field?l.field(e):e[void 0===l.field?l.name:l.field],l.format))).join(",")))).join("\r\n");(0,f.Z)(a+".csv",i,"text/csv")},async searchFilter(){console.log({startDate:this.startDate,endDate:this.endDate,source:this.source["source_name"],payment:this.payment["payment_type"],method:this.method["name"]}),""==this.startDate||""==this.endDate?(this.dialog=!0,this.rows=[]):this.billableSales({startDate:this.startDate,endDate:this.endDate,source:this.source,payment:this.payment,method:this.method}).then((()=>{var e=this.billable;console.log(this.billable),this.rows=e}))}},watch:{startDate(){if(""==this.startDate)this.minDate="",this.maxDate="";else{this.minDate=this.startDate;var e=new Date(this.startDate);e.setDate(e.getDate()+31),this.maxDate=e.toISOString().slice(0,10)}}}});var w=t(4260),S=t(2448),q=t(4842),V=t(8240),A=t(8107),C=t(6778),O=t(151),T=t(5589),W=t(9367),B=t(677),E=t(7518),Z=t.n(E);const k=(0,w.Z)(y,[["render",v]]),I=k;Z()(y,"components",{QSelect:S.Z,QInput:q.Z,QBtn:V.Z,QTable:A.Z,QDialog:C.Z,QCard:O.Z,QCardSection:T.Z,QCardActions:W.Z}),Z()(y,"directives",{ClosePopup:B.Z})}}]);
"use strict";(globalThis["webpackChunkofs_2_0"]=globalThis["webpackChunkofs_2_0"]||[]).push([[34],{7034:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var l=a(3673),i=a(2323);const r={style:{overflow:"auto",height:"88vh"}},n={class:"q-pa-md row",style:{"margin-left":"15px","margin-right":"15px","padding-left":"0px","border-bottom":"2px solid #DEDEDE"}},s=(0,l._)("div",{class:"col-6"},[(0,l._)("div",{style:{"font-size":"20px"}},[(0,l._)("b",null,"Diverted Orders")])],-1),o={class:"col-6"},d={style:{"font-size":"15px","text-align":"right"}},c=(0,l._)("b",null,"Date: ",-1),m=(0,l._)("div",{style:{"margin-left":"15px","margin-top":"15px","font-size":"15px"}},[(0,l._)("b",null,"Filters:")],-1),u={class:"row items-start q-pa-md"},g={class:"col-lg-2 col-md-3 col-sm-4 col-xs-6 q-pa-sm"},p={class:"col-lg-2 col-md-3 col-sm-4 col-xs-6 q-pa-sm"},D={class:"col-lg-2 col-md-3 col-sm-4 col-xs-6 q-pa-sm"},h={class:"col-lg-2 col-md-3 col-sm-4 col-xs-6 q-pa-sm"},v={class:"q-pa-md"},_=(0,l._)("div",{class:"text-h6"},"Alert",-1);function b(e,t,a,b,f,w){const x=(0,l.up)("q-input"),y=(0,l.up)("q-btn"),O=(0,l.up)("q-table"),q=(0,l.up)("q-card-section"),k=(0,l.up)("q-card-actions"),S=(0,l.up)("q-card"),E=(0,l.up)("q-dialog"),C=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",null,[(0,l._)("div",n,[s,(0,l._)("div",o,[(0,l._)("div",d,[c,(0,l.Uk)(" "+(0,i.zw)(this.todate),1)])])]),m,(0,l._)("div",u,[(0,l._)("div",g,[(0,l.Wm)(x,{"bg-color":"white",outlined:"",type:"date",hint:"Start date *",modelValue:e.startDate,"onUpdate:modelValue":t[0]||(t[0]=t=>e.startDate=t),dense:""},null,8,["modelValue"])]),(0,l._)("div",p,[(0,l.Wm)(x,{"bg-color":"white",outlined:"",type:"date",hint:"End date *",min:e.minDate,max:e.maxDate,modelValue:e.endDate,"onUpdate:modelValue":t[1]||(t[1]=t=>e.endDate=t),dense:""},null,8,["min","max","modelValue"])]),(0,l._)("div",D,[(0,l.Wm)(y,{style:{width:"100%"},color:"primary","icon-right":"search",label:"Search","no-caps":"",onClick:e.searchFilter},null,8,["onClick"])]),(0,l._)("div",h,[(0,l.Wm)(y,{style:{width:"100%"},color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:e.exportFiltered},null,8,["onClick"])])]),(0,l._)("div",null,[(0,l._)("div",v,[(0,l.Wm)(O,{pagination:e.initialPagination,color:"primary",columns:e.columns,rows:e.divertedOrders,loading:e.loading,"row-key":"name",ref:"tb"},null,8,["pagination","columns","rows","loading"])])])]),(0,l.Wm)(E,{modelValue:e.dialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"bg-red text-white",style:{width:"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(q,null,{default:(0,l.w5)((()=>[_])),_:1}),(0,l.Wm)(q,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Start date and End date are required. ")])),_:1}),(0,l.Wm)(k,{align:"right",class:"bg-white text-black"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(y,{flat:"",label:"OK"},null,512),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var f=a(741),w=a(2841);function x(e,t){let a=void 0!==t?t(e):e;return a=void 0===a||null===a?"":String(a),a=a.split('"').join('""'),`"${a}"`}var y=new Date,O=y.getFullYear()+"-"+(y.getMonth()+1)+"-"+y.getDate();const q=(0,l.aZ)({name:"Diverted Orders",computed:{...(0,f.Se)("DivertedOrder",{divertedOrders:"GET_DIVERTED_ORDERS",loading:"GET_LOADING"}),...(0,f.Se)("Auth",{user:"GET_PROFILE"})},data(){return{todate:O,initialPagination:{sortBy:"desc",descending:!0,rowsPerPage:50},columns:[{name:"order_number",label:"Order No",field:"order_number",align:"center"},{name:"order_date",label:"Order Date",field:"order_date",align:"center"},{name:"created_by",label:"Created By",field:"created_by",align:"center"},{name:"orig_store",label:"From",field:"orig_store",align:"center"},{name:"new_store",label:"To",field:"new_store",align:"center"},{name:"reason",label:"Reason",field:"reason",align:"center"},{name:"remarks",label:"Remarks",field:"remarks",align:"center"},{name:"diverted_by",label:"Diverted By",field:"diverted_by",align:"center"},{name:"diverted_date",label:"Divert Date",field:"diverted_date",align:"center"}],startDate:"",endDate:"",dialog:!1,position:"top",minDate:"",maxDate:""}},methods:{...(0,f.nv)("DivertedOrder",["getDivertedOrders"]),exportFiltered(){var e=new Date;e.setDate(e.getDate());var t=e.toISOString().slice(0,10),a=this.user,l=a.store_name+"/DivertedOrders/"+t;const i=[this.columns.map((e=>x(e.label)))].concat(this.$refs.tb.filteredSortedRows.map((e=>this.columns.map((t=>x("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format))).join(",")))).join("\r\n");(0,w.Z)(l+".csv",i,"text/csv")},searchFilter(){const e=new Date;e.getHours(),e.getMinutes(),e.getSeconds();""==this.startDate||""==this.endDate?(this.dialog=!0,this.rows=[]):this.getDivertedOrders({startDate:this.startDate,endDate:this.endDate})}},watch:{startDate(){if(""==this.startDate)this.minDate="",this.maxDate="";else{this.minDate=this.startDate;var e=new Date(this.startDate);e.setDate(e.getDate()+31),this.maxDate=e.toISOString().slice(0,10)}}}});var k=a(4260),S=a(4842),E=a(8240),C=a(8107),W=a(6778),Z=a(151),V=a(5589),F=a(9367),Q=a(677),T=a(7518),R=a.n(T);const I=(0,k.Z)(q,[["render",b]]),P=I;R()(q,"components",{QInput:S.Z,QBtn:E.Z,QTable:C.Z,QDialog:W.Z,QCard:Z.Z,QCardSection:V.Z,QCardActions:F.Z}),R()(q,"directives",{ClosePopup:Q.Z})}}]);
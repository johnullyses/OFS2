"use strict";(globalThis["webpackChunkofs_2_0"]=globalThis["webpackChunkofs_2_0"]||[]).push([[640],{7640:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var l=a(9835);const i={style:{"max-height":"90vh",overflow:"auto"}},r=(0,l.uE)('<div class="q-pa-md row" style="margin-left:15px;margin-right:15px;padding-left:0px;border-bottom:2px solid #DEDEDE;"><div class="col-6"><div style="font-size:20px;"><b>Status Analyze</b></div></div><div class="col-6"><div style="font-size:15px;text-align:right;"><b>Date: </b> Today</div></div></div><div style="margin-left:15px;margin-top:15px;font-size:15px;"><b>Filters:</b></div>',2),o={class:"row items-start q-pa-md"},d={class:"col-xs-12 col-sm-6 col-md-2 gutter"},n={class:"col-xs-12 col-sm-6 col-md-2 gutter"},s={class:"gutter"},c={class:"q-pa-md"},g=(0,l._)("div",{style:{padding:"12px"}},[(0,l.Uk)(" LEGEND:"),(0,l._)("br"),(0,l._)("b",null,"OR"),(0,l.Uk)(" = Order Recieve"),(0,l._)("br"),(0,l._)("b",null,"OA"),(0,l.Uk)(" = Order Acknowledge"),(0,l._)("br"),(0,l._)("b",null,"RA"),(0,l.Uk)(" = Rider Assign"),(0,l._)("br"),(0,l._)("b",null,"RO"),(0,l.Uk)(" = Rider Out"),(0,l._)("br"),(0,l._)("b",null,"RB"),(0,l.Uk)(" = Rider Back ")],-1),_=(0,l._)("div",{class:"text-h6"},"Alert",-1);function u(e,t,a,u,m,p){const h=(0,l.up)("q-input"),b=(0,l.up)("q-btn"),x=(0,l.up)("q-card"),v=(0,l.up)("q-table"),f=(0,l.up)("q-card-section"),D=(0,l.up)("q-card-actions"),w=(0,l.up)("q-dialog"),k=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",i,[r,(0,l._)("div",o,[(0,l._)("div",d,[(0,l.Wm)(h,{"bg-color":"white",outlined:"",type:"date",hint:"Start date *",modelValue:e.startDate,"onUpdate:modelValue":t[0]||(t[0]=t=>e.startDate=t),dense:"",style:{"margin-right":"8px"}},null,8,["modelValue"])]),(0,l._)("div",n,[(0,l.Wm)(h,{"bg-color":"white",outlined:"",type:"date",hint:"End date *",min:e.minDate,max:e.maxDate,modelValue:e.endDate,"onUpdate:modelValue":t[1]||(t[1]=t=>e.endDate=t),dense:"",style:{"margin-right":"8px"}},null,8,["min","max","modelValue"])]),(0,l._)("div",s,[(0,l.Wm)(b,{color:"primary","icon-right":"search",label:"Search","no-caps":"",onClick:e.searchFilter,style:{"margin-right":"8px"}},null,8,["onClick"]),(0,l.Wm)(b,{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:e.exportFiltered,style:{"margin-right":"8px"}},null,8,["onClick"])])]),(0,l._)("div",null,[(0,l._)("div",c,[(0,l.Wm)(x,{class:"my-card",style:{"margin-bottom":"7px","font-size":"13px"}},{default:(0,l.w5)((()=>[g])),_:1}),(0,l.Wm)(v,{id:"test",pagination:e.initialPagination,color:"primary",columns:e.columns,"row-key":"order_number",ref:"tb",rows:e.rows,loading:e.loading},null,8,["pagination","columns","rows","loading"])])]),(0,l.Wm)(w,{modelValue:e.dialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialog=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"bg-red text-white",style:{width:"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[_])),_:1}),(0,l.Wm)(f,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Start date and End date are required. ")])),_:1}),(0,l.Wm)(D,{align:"right",class:"bg-white text-black"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(b,{flat:"",label:"OK"},null,512),[[k]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}a(8964);var m=a(3100),p=a(6646);function h(e,t){let a=void 0!==t?t(e):e;return a=void 0===a||null===a?"":String(a),a=a.split('"').join('""'),`"${a}"`}const b=(0,l.aZ)({name:"StatusAnalyze",computed:{...(0,m.Se)("StatusAnalyze",{statusAnalysisData:"GET_STATUS_ANALYZE",loading:"GET_LOADING"}),...(0,m.Se)("Auth",{user:"GET_PROFILE"})},data(){return{initialPagination:{sortBy:"desc",descending:!0,rowsPerPage:50},columns:[{name:"code",label:"Code",field:"code",align:"center"},{name:"order_number",label:"Order No.",field:"order_number",align:"center"},{name:"total_net",label:"Net Total",field:"total_net",align:"center"},{name:"total_gross",label:"Gross Total",field:"total_gross",align:"center"},{name:"received_to_acknowledge",label:"OR->OA",field:"received_to_acknowledge",align:"center"},{name:"acknowledge_to_rider_assigned",label:"OA->RA",field:"acknowledge_to_rider_assigned",align:"center"},{name:"rider_assigned_to_rider_out",label:"RA->RO",field:"rider_assigned_to_rider_out",align:"center"},{name:"rider_out_to_rider_back",label:"RO->RB",field:"rider_out_to_rider_back",align:"center"},{name:"rider_back_to_close",label:"RB->CLOSED",field:"rider_back_to_close",align:"center"}],rows:[],startDate:"",endDate:"",minDate:"",maxDate:"",total_net:"",total_gross:"",dialog:!1}},methods:{...(0,m.nv)("StatusAnalyze",["getStatusAnalyze"]),searchFilter(){""==this.startDate||""==this.endDate?(this.dialog=!0,this.rows=[]):this.getStatusAnalyze({startDate:this.startDate,endDate:this.endDate}).then((()=>{var e=this.statusAnalysisData,t=0,a=0,l=0,i=0,r=0,o=0,d=0;e.forEach((e=>{t+=parseFloat(e.total_net),a+=parseFloat(e.total_gross),l+=parseFloat(e.received_to_acknowledge),i+=parseFloat(e.acknowledge_to_rider_assigned),r+=parseFloat(e.rider_assigned_to_rider_out),o+=parseFloat(e.rider_out_to_rider_back),d+=parseFloat(e.rider_back_to_close)}));var n=[{code:"TC "+e.length,order_number:"",total_net:t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),total_gross:a.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),received_to_acknowledge:"NaN"==(l/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")?"0":(l/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),acknowledge_to_rider_assigned:"NaN"==(i/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")?"0":(i/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),rider_assigned_to_rider_out:"NaN"==(r/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")?"0":(r/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),rider_out_to_rider_back:"NaN"==(o/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")?"0":(o/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),rider_back_to_close:"NaN"==(d/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")?"0":(d/e.length).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}],s=e.concat(n);this.rows=s}))},exportFiltered(){var e=new Date;e.setDate(e.getDate());var t=e.toISOString().slice(0,10),a=this.user,l=a.store_name+"/StatusAnalyze/"+t;const i=[this.columns.map((e=>h(e.label)))].concat(this.$refs.tb.filteredSortedRows.map((e=>this.columns.map((t=>h("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format))).join(",")))).join("\r\n");(0,p.Z)(l+".csv",i,"text/csv")}},watch:{startDate(){if(""==this.startDate)this.minDate="",this.maxDate="";else{this.minDate=this.startDate;var e=new Date(this.startDate);e.setDate(e.getDate()+31),this.maxDate=e.toISOString().slice(0,10)}}}});var x=a(1639),v=a(6611),f=a(4455),D=a(4458),w=a(7580),k=a(2074),y=a(3190),F=a(1821),A=a(2146),S=a(9984),B=a.n(S);const O=(0,x.Z)(b,[["render",u]]),R=O;B()(b,"components",{QInput:v.Z,QBtn:f.Z,QCard:D.Z,QTable:w.Z,QDialog:k.Z,QCardSection:y.Z,QCardActions:F.Z}),B()(b,"directives",{ClosePopup:A.Z})}}]);
"use strict";(globalThis["webpackChunkofs_2_0"]=globalThis["webpackChunkofs_2_0"]||[]).push([[883],{883:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ce});var a=l(3673),i=l(2323);const o={class:"q-pa-lg",style:{"padding-right":"0px","padding-left":"0px",height:"100vh",overflow:"auto"}},s={class:"q-pa-md row",style:{"border-bottom":"2px solid #DEDEDE"}},d={class:"col-8"},n=(0,a._)("b",null,"Store Name:",-1),r={class:"col-4"},u={class:"float-right"},m=(0,a._)("b",null,"Date:",-1),h={class:"row"},c={class:"col-md-6 col-sm-12 col-xs-12"},p=(0,a._)("div",{class:"q-pa-md"},[(0,a._)("b",{style:{"font-size":"16px",color:"#5C5C5C"}},"Store Hours")],-1),_={style:{padding:"0px 5px 0px 0px","margin-top":"8px"}},y={class:"col-10"},g={style:{"font-size":"16px"}},w={class:"col-2"},f={class:"col-md-6 col-sm-12 col-xs-12"},v={class:"q-pa-md"},x=(0,a._)("b",{style:{"font-size":"16px",color:"#5C5C5C"}},"Holidays or Special Hours",-1),b={style:{padding:"0px 0px 0px 5px"}},H={class:"col-10"},S={style:{"font-size":"16px"}},W={class:"col-2"},k={class:"text-h6"},C={class:"row col-5 q-pa-sm"},q=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"Start Time")],-1),V={class:"col-6 q-pa-sm"},U={class:"col-6 q-pa-sm"},E={class:"row col-5 q-pa-sm"},D=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"End Time")],-1),M={class:"col-6 q-pa-sm"},z={class:"col-6 q-pa-sm"},O=(0,a._)("div",{class:"text-h6"},"Holidays or Special Hours",-1),I={class:"row col-5 q-pa-sm"},T=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"Start Time")],-1),Z={class:"col-6 q-pa-sm"},Q={class:"col-6 q-pa-sm"},F={class:"row col-5 q-pa-sm"},A=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"End Time")],-1),N={class:"col-6 q-pa-sm"},G={class:"col-6 q-pa-sm"},K={class:"row col-5 q-pa-sm"},J=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"Date")],-1),L={class:"col-12 q-pa-sm"},Y=(0,a._)("div",{class:"text-h6"},"Alert",-1),P=(0,a._)("span",{class:"q-ml-sm"},"Remove this Setting?",-1);function B(e,t,l,B,R,j){const X=(0,a.up)("q-btn"),$=(0,a.up)("q-card"),ee=(0,a.up)("q-card-section"),te=(0,a.up)("q-select"),le=(0,a.up)("q-card-actions"),ae=(0,a.up)("q-dialog"),ie=(0,a.up)("q-input"),oe=(0,a.up)("q-avatar"),se=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",s,[(0,a._)("div",d,[(0,a._)("div",null,[n,(0,a.Uk)(" "+(0,i.zw)(e.profile.store_name),1)])]),(0,a._)("div",r,[(0,a._)("div",u,[m,(0,a.Uk)(" "+(0,i.zw)(e.todate),1)])])]),(0,a._)("div",h,[(0,a._)("div",c,[p,(0,a._)("div",_,[(0,a.Wm)($,{class:"no-shadow q-pa-sm",style:{height:"73.5vh",overflow:"auto"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.tempSchedule,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l,class:"row q-pa-md",style:{"border-bottom":"2px solid #DEDEDE"}},[(0,a._)("div",y,[(0,a._)("div",g,(0,i.zw)(t.day_of_week),1),(0,a._)("div",null,[(0,a._)("b",null,(0,i.zw)(t.start_time)+" - "+(0,i.zw)(t.end_time),1)])]),(0,a._)("div",w,[(0,a.Wm)(X,{style:{width:"70px","font-size":"13px","text-transform":"lowercase",height:"20px","border-radius":"20px"},onClick:t=>(e.dialog=!0,e.setEditIndex(l)),dense:"",color:"green","text-color":"white",label:"Edit"},null,8,["onClick"])])])))),128))])),_:1})])]),(0,a._)("div",f,[(0,a._)("div",v,[x,(0,a.Wm)(X,{style:{"margin-left":"20px",width:"35px","border-radius":"50%"},onClick:t[0]||(t[0]=t=>e.dialog2=!0),dense:"",color:"green","text-color":"white",label:"+"})]),(0,a._)("div",b,[(0,a.Wm)($,{class:"no-shadow",style:{height:"73.5vh",overflow:"auto"}},{default:(0,a.w5)((()=>[(0,a.Wm)($,{class:"no-shadow q-pa-sm",style:{height:"73.5vh"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.holidays,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l,class:"row q-pa-md",style:{"border-bottom":"2px solid #DEDEDE"}},[(0,a._)("div",H,[(0,a._)("div",S,(0,i.zw)(t.date),1),(0,a._)("div",null,[(0,a._)("b",null,(0,i.zw)(t.start_time)+" - "+(0,i.zw)(t.end_time),1)])]),(0,a._)("div",W,[(0,a.Wm)(X,{flat:"",onClick:l=>(e.dialog2=!0,e.editHoliday(t)),dense:"",color:"green","text-color":"black",icon:"edit"},null,8,["onClick"]),(0,a.Wm)(X,{flat:"",onClick:l=>(e.confirm=!0,e.holidayId=t.id),dense:"",color:"green","text-color":"black",icon:"delete"},null,8,["onClick"])])])))),128))])),_:1})])),_:1})])])]),(0,a.Wm)(ae,{modelValue:e.dialog,"onUpdate:modelValue":t[7]||(t[7]=t=>e.dialog=t)},{default:(0,a.w5)((()=>[(0,a.Wm)($,{style:{"max-width":"500px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ee,null,{default:(0,a.w5)((()=>[(0,a._)("div",k,(0,i.zw)(e.tempSchedule[e.index].day_of_week),1)])),_:1}),(0,a.Wm)(ee,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a._)("div",C,[q,(0,a._)("div",V,[(0,a.Uk)(" Hour "),(0,a.Wm)(te,{dense:"",filled:"",modelValue:e.time.start.hour,"onUpdate:modelValue":t[1]||(t[1]=t=>e.time.start.hour=t),options:e.getHours()},null,8,["modelValue","options"])]),(0,a._)("div",U,[(0,a.Uk)(" Minute "),(0,a.Wm)(te,{dense:"",filled:"",modelValue:e.time.start.minute,"onUpdate:modelValue":t[2]||(t[2]=t=>e.time.start.minute=t),options:e.getMinutes()},null,8,["modelValue","options"])])]),(0,a._)("div",E,[D,(0,a._)("div",M,[(0,a.Uk)(" Hour "),(0,a.Wm)(te,{dense:"",filled:"",modelValue:e.time.end.hour,"onUpdate:modelValue":t[3]||(t[3]=t=>e.time.end.hour=t),options:e.getHours()},null,8,["modelValue","options"])]),(0,a._)("div",z,[(0,a.Uk)(" Minute "),(0,a.Wm)(te,{dense:"",filled:"",modelValue:e.time.end.minute,"onUpdate:modelValue":t[4]||(t[4]=t=>e.time.end.minute=t),options:e.getMinutes()},null,8,["modelValue","options"])])])])),_:1}),(0,a.Wm)(le,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{flat:"",label:"Cancel",color:"primary",onClick:t[5]||(t[5]=t=>e.dialog=!1)}),(0,a.Wm)(X,{flat:"",label:"OK",color:"primary",onClick:t[6]||(t[6]=t=>e.setTime()),loading:e.loading},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(ae,{modelValue:e.dialog2,"onUpdate:modelValue":t[15]||(t[15]=t=>e.dialog2=t)},{default:(0,a.w5)((()=>[(0,a.Wm)($,{style:{"max-width":"500px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ee,null,{default:(0,a.w5)((()=>[O])),_:1}),(0,a.Wm)(ee,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a._)("div",I,[T,(0,a._)("div",Z,[(0,a.Uk)(" Hour "),(0,a.Wm)(te,{dense:"",filled:"",modelValue:e.holiday.start.hour,"onUpdate:modelValue":t[8]||(t[8]=t=>e.holiday.start.hour=t),options:e.getHours()},null,8,["modelValue","options"])]),(0,a._)("div",Q,[(0,a.Uk)(" Minute "),(0,a.Wm)(te,{dense:"",filled:"",modelValue:e.holiday.start.minute,"onUpdate:modelValue":t[9]||(t[9]=t=>e.holiday.start.minute=t),options:e.getMinutes()},null,8,["modelValue","options"])])]),(0,a._)("div",F,[A,(0,a._)("div",N,[(0,a.Uk)(" Hour "),(0,a.Wm)(te,{dense:"",filled:"",modelValue:e.holiday.end.hour,"onUpdate:modelValue":t[10]||(t[10]=t=>e.holiday.end.hour=t),options:e.getHours()},null,8,["modelValue","options"])]),(0,a._)("div",G,[(0,a.Uk)(" Minute "),(0,a.Wm)(te,{dense:"",filled:"",modelValue:e.holiday.end.minute,"onUpdate:modelValue":t[11]||(t[11]=t=>e.holiday.end.minute=t),options:e.getMinutes()},null,8,["modelValue","options"])])]),(0,a._)("div",K,[J,(0,a._)("div",L,[(0,a.Wm)(ie,{"bg-color":"white",min:e.todate,outlined:"",type:"date",modelValue:e.holiday.date,"onUpdate:modelValue":t[12]||(t[12]=t=>e.holiday.date=t),dense:""},null,8,["min","modelValue"])])])])),_:1}),(0,a.Wm)(le,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{flat:"",label:"Cancel",color:"primary",onClick:t[13]||(t[13]=t=>(e.dialog2=!1,e.resetHolidayFrom()))}),(0,a.Wm)(X,{flat:"",label:"OK",color:"primary",onClick:t[14]||(t[14]=t=>e.saveHoliday()),loading:e.loading},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(ae,{modelValue:e.alert,"onUpdate:modelValue":t[16]||(t[16]=t=>e.alert=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)($,{class:(0,i.C_)(e.alertColor+" text-white"),style:{width:"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ee,null,{default:(0,a.w5)((()=>[Y])),_:1}),(0,a.Wm)(ee,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.alertMessage),1)])),_:1}),(0,a.Wm)(le,{align:"right",class:"bg-white text-teal"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(X,{flat:"",label:"OK"},null,512),[[se]])])),_:1})])),_:1},8,["class"])])),_:1},8,["modelValue"]),(0,a.Wm)(ae,{modelValue:e.confirm,"onUpdate:modelValue":t[18]||(t[18]=t=>e.confirm=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)($,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ee,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{icon:"delete",color:"primary","text-color":"white"}),P])),_:1}),(0,a.Wm)(le,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(X,{flat:"",label:"Cancel",color:"primary"},null,512),[[se]]),(0,a.Wm)(X,{flat:"",loading:e.loading,label:"Ok",onClick:t[17]||(t[17]=t=>e.removeHoliday()),color:"primary"},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}l(5663);var R=l(741),j=new Date,X=j.getFullYear()+"-"+(j.getMonth()+1)+"-"+j.getDate();const $=(0,a.aZ)({name:"StoreOperatingHours",computed:{...(0,R.Se)("HubDec",{schedule:"GET_SCHEDULE",loading:"GET_HUB_DEC_LOADING",holidays:"GET_HOLIDAYS"}),...(0,R.Se)("Auth",{profile:"GET_PROFILE"})},async mounted(){this.profile.store_id&&(await this.getStoreOperatingHours(),this.schedule.length>0&&(this.tempSchedule=JSON.parse(JSON.stringify(this.schedule))))},data:()=>({todate:X,dialog:!1,dialog2:!1,index:-1,tempSchedule:[{day_of_week:"Sunday",day:1,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Monday",day:2,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Tuesday",day:3,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Wednesday",day:4,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Thursday",day:5,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Friday",day:6,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Saturday",day:7,start_time:"01:23:00",end_time:"02:23:00"}],time:{start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"}},holiday:{start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"},date:""},alert:!1,alertMessage:"",alertColor:"bg-green",holidayEdit:!1,holidayId:-1,confirm:!1}),methods:{...(0,R.nv)("HubDec",["setStoreOperatingHours","getStoreOperatingHours","createHoliday","updateHoliday","deleteHoliday"]),setEditIndex(e){this.index=e,this.time={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"}}},getHours(){var e=[];const t=(e,t)=>String(e).padStart(t,"0");for(let l=0;l<24;l++)e.push(t(l,2));return e},getMinutes(){var e=[];const t=(e,t)=>String(e).padStart(t,"0");for(let l=0;l<60;l++)e.push(t(l,2));return e},async setTime(){this.tempSchedule[this.index].start_time=this.time.start.hour+":"+this.time.start.minute+":00",this.tempSchedule[this.index].end_time=this.time.end.hour+":"+this.time.end.minute+":00",await this.save(),this.dialog=!1},async save(){console.log(this.tempSchedule),await this.setStoreOperatingHours({schedule:this.tempSchedule}).then((async e=>{e?(await this.getStoreOperatingHours(),this.tempSchedule=JSON.parse(JSON.stringify(this.schedule)),this.alert=!0,this.alertColor="bg-green",this.alertMessage="Successfully Updated!"):(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Failed to save, please try again.")})),this.time={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"}}},resetHolidayFrom(){this.holidayEdit=!1,this.holidayId=-1,this.holiday={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"},date:""}},async saveHoliday(){var e=parseInt(this.holiday.start.hour),t=parseInt(this.holiday.end.hour);e>t?(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Invalid date."):""==this.holiday.date?(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Please select date."):this.holidayEdit?await this.updateHoliday({start_time:this.holiday.date+" "+this.holiday.start.hour+":"+this.holiday.start.minute+":00",end_time:this.holiday.date+" "+this.holiday.end.hour+":"+this.holiday.end.minute+":00",id:this.holidayId}).then((async e=>{e?(await this.getStoreOperatingHours(),this.holiday={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"},date:""},this.dialog2=!1,this.alert=!0,this.alertColor="bg-green",this.alertMessage="Successfully Updated!"):(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Failed to save, please try again.")})):await this.createHoliday({start_time:this.holiday.date+" "+this.holiday.start.hour+":"+this.holiday.start.minute+":00",end_time:this.holiday.date+" "+this.holiday.end.hour+":"+this.holiday.end.minute+":00"}).then((async e=>{e?(await this.getStoreOperatingHours(),this.holiday={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"},date:""},this.dialog2=!1,this.alert=!0,this.alertColor="bg-green",this.alertMessage="Successfully Created!"):(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Failed to save, please try again.")}))},editHoliday(e){var t=e.start_time.split(":"),l=e.end_time.split(":");this.holiday={start:{hour:t[0],minute:t[1]},end:{hour:l[0],minute:l[1]},date:e.date_y_m_d},this.holidayId=e.id,this.holidayEdit=!0},async removeHoliday(){await this.deleteHoliday({id:this.holidayId}).then((async e=>{e&&(this.holidayId=-1,await this.getStoreOperatingHours(),this.confirm=!1)}))}}});var ee=l(4260),te=l(151),le=l(8240),ae=l(6778),ie=l(5589),oe=l(2448),se=l(9367),de=l(4842),ne=l(5096),re=l(677),ue=l(7518),me=l.n(ue);const he=(0,ee.Z)($,[["render",B]]),ce=he;me()($,"components",{QCard:te.Z,QBtn:le.Z,QDialog:ae.Z,QCardSection:ie.Z,QSelect:oe.Z,QCardActions:se.Z,QInput:de.Z,QAvatar:ne.Z}),me()($,"directives",{ClosePopup:re.Z})}}]);
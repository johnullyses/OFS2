"use strict";(globalThis["webpackChunkofs_2_0"]=globalThis["webpackChunkofs_2_0"]||[]).push([[836],{8836:(e,l,i)=>{i.r(l),i.d(l,{default:()=>Z});var t=i(9835),o=i(6970);const a={class:"q-pa-md",container:""},s={class:"q-pa-md row",style:{"margin-left":"15px","margin-right":"15px","padding-left":"0px","border-bottom":"2px solid #DEDEDE"}},n=(0,t._)("div",{class:"col-6"},[(0,t._)("div",{style:{"font-size":"20px"}},[(0,t._)("b",null,"User Assign Role")])],-1),d={class:"col-6"},r={style:{"font-size":"15px","text-align":"right"}},c=(0,t._)("b",null,"Date: ",-1),g={class:"q-pa-md",style:{"min-height":"100vh"}},p={class:"row items-start",style:{"margin-bottom":"10px"}},u={class:"col-xs-12 col-sm-6 col-md-2 gutter"},m={key:0},h={key:1},b={key:0},w={key:1};function _(e,l,i,_,v,f){const R=(0,t.up)("q-icon"),y=(0,t.up)("q-input"),U=(0,t.up)("q-select"),k=(0,t.up)("q-td"),D=(0,t.up)("q-btn"),x=(0,t.up)("q-table");return(0,t.wg)(),(0,t.iD)("div",a,[(0,t._)("div",s,[n,(0,t._)("div",d,[(0,t._)("div",r,[c,(0,t.Uk)((0,o.zw)(this.todate),1)])])]),(0,t._)("div",g,[(0,t._)("div",p,[(0,t._)("div",u,[(0,t.Wm)(y,{"bg-color":"white",outlined:"",modelValue:v.filter,"onUpdate:modelValue":l[0]||(l[0]=e=>v.filter=e),label:"Search",dense:""},{append:(0,t.w5)((()=>[(0,t.Wm)(R,{name:"search"})])),_:1},8,["modelValue"])])]),(0,t.Wm)(x,{id:"test",pagination:v.initialPagination,color:"primary",columns:v.columns,rows:e.users,"row-key":"name",ref:"tb",filter:v.filter,loading:e.loading},{"body-cell-role_id":(0,t.w5)((i=>[(0,t.Wm)(k,{props:i},{default:(0,t.w5)((()=>[1==v.editable&&v.editRoleId==i.row.id?((0,t.wg)(),(0,t.iD)("div",m,[(0,t.Wm)(U,{style:{padding:"0"},"bg-color":"white",outlined:"",options:e.roles,modelValue:v.user_role,"onUpdate:modelValue":l[1]||(l[1]=e=>v.user_role=e),"option-value":"id","option-label":"name",label:"Roles",error:!v.isvalid,dense:""},null,8,["options","modelValue","error"])])):((0,t.wg)(),(0,t.iD)("div",h,(0,o.zw)(f.getRoles(i.row.role_id)),1))])),_:2},1032,["props"])])),"body-cell-action":(0,t.w5)((e=>[(0,t.Wm)(k,{props:e},{default:(0,t.w5)((()=>[1==v.editable&&v.editRoleId==e.row.id?((0,t.wg)(),(0,t.iD)("div",b,[(0,t.Wm)(D,{color:"green",label:"Save","no-caps":"",loading:v.loadingUpdate,style:{"margin-right":"8px"},onClick:l=>f.updateRole(e.row.id)},null,8,["loading","onClick"]),(0,t.Wm)(D,{color:"red",label:"Cancel","no-caps":"",style:{"margin-right":"8px"},onClick:l[2]||(l[2]=e=>f.editRole(v.editable=!1))})])):((0,t.wg)(),(0,t.iD)("div",w,[(0,t.Wm)(D,{color:"primary",label:"Edit","no-caps":"",style:{"margin-right":"8px"},onClick:l=>f.editRole(e.row.id)},null,8,["onClick"])]))])),_:2},1032,["props"])])),_:1},8,["pagination","columns","rows","filter","loading"])])])}var v=i(3100),f=i(499),R=new Date,y=R.getFullYear()+"-"+(R.getMonth()+1).toString().padStart(2,"0")+"-"+R.getDate().toString().padStart(2,"0");const U={name:"UserAssignRole",async beforeMount(){await this.userRoles(),await this.getUsers()},data(){return{todate:y,filter:(0,f.iH)(""),initialPagination:{sortBy:"desc",descending:!0,rowsPerPage:25},columns:[{name:"name",label:"Name",field:"name",align:"center"},{name:"email",label:"Email",field:"email",align:"center"},{name:"role_id",label:"Role",field:"role_id",align:"center"},{name:"action",label:"Actions",field:"action",align:"center"}],editable:!1,editRoleId:"",isDisabled:!1,user_role:"",loadingUpdate:!1,isvalid:!0}},computed:{...(0,v.Se)("UserAssigneRole",{users:"GET_USERS",roles:"GET_ROLES",loading:"GET_LOADING"})},methods:{...(0,v.nv)("UserAssigneRole",["getUsers","userRoles","updateUserRole"]),editRole(e){this.editable=!0,this.editRoleId=e,this.isDisabled=!0,this.isvalid=!0},getRoles(e){if(null==e)return"";var l=this.roles.filter((l=>l.id==e));return l[0].name},updateRole(e){this.loadingUpdate=!0,this.user_role?(this.updateUserRole({user_id:e,role_id:this.user_role["id"]}).then((async()=>{this.editable=!1,this.loadingUpdate=!1,await this.getUsers()})),this.isvalid=!0):(this.isvalid=!1,console.log("wala"),this.loadingUpdate=!1)}}};var k=i(1639),D=i(6611),x=i(2857),S=i(7580),E=i(7220),q=i(2259),W=i(4455),C=i(9984),I=i.n(C);const T=(0,k.Z)(U,[["render",_]]),Z=T;I()(U,"components",{QInput:D.Z,QIcon:x.Z,QTable:S.Z,QTd:E.Z,QSelect:q.Z,QBtn:W.Z})}}]);
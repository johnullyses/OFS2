"use strict";(self["webpackChunkofs_2_0"]=self["webpackChunkofs_2_0"]||[]).push([[883],{883:(e,t,l)=>{l.r(t),l.d(t,{default:()=>xe});var a=l(3673),i=l(2323);const o={class:"q-pa-lg",style:{"padding-right":"0px","padding-left":"0px",height:"100vh",overflow:"auto"}},s={class:"q-pa-md row",style:{"border-bottom":"2px solid #DEDEDE"}},d={class:"col-8"},n=(0,a._)("b",null,"Store Name:",-1),r={class:"col-4"},u={class:"float-right"},m=(0,a._)("b",null,"Date:",-1),h={class:"row"},c={class:"col-md-6 col-sm-12 col-xs-12"},p=(0,a._)("div",{class:"q-pa-md"},[(0,a._)("b",{style:{"font-size":"16px",color:"#5C5C5C"}},"Store Hours")],-1),_={style:{padding:"0px 5px 0px 0px","margin-top":"8px"}},y={class:"col-10"},g={style:{"font-size":"16px"}},w={class:"col-2"},f={class:"col-md-6 col-sm-12 col-xs-12"},v={class:"q-pa-md"},x=(0,a._)("b",{style:{"font-size":"16px",color:"#5C5C5C"}},"Holidays or Special Hours",-1),b={style:{padding:"0px 0px 0px 5px"}},H={class:"col-10"},S={style:{"font-size":"16px"}},W={class:"col-2"},k={class:"text-h6"},C={class:"row col-5 q-pa-sm"},q=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"Start Time")],-1),V={class:"col-6 q-pa-sm"},U=(0,a.Uk)(" Hour "),E={class:"col-6 q-pa-sm"},D=(0,a.Uk)(" Minute "),M={class:"row col-5 q-pa-sm"},z=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"End Time")],-1),O={class:"col-6 q-pa-sm"},I=(0,a.Uk)(" Hour "),T={class:"col-6 q-pa-sm"},Z=(0,a.Uk)(" Minute "),Q=(0,a._)("div",{class:"text-h6"},"Holidays or Special Hours",-1),F={class:"row col-5 q-pa-sm"},A=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"Start Time")],-1),N={class:"col-6 q-pa-sm"},G=(0,a.Uk)(" Hour "),K={class:"col-6 q-pa-sm"},J=(0,a.Uk)(" Minute "),L={class:"row col-5 q-pa-sm"},Y=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"End Time")],-1),P={class:"col-6 q-pa-sm"},B=(0,a.Uk)(" Hour "),R={class:"col-6 q-pa-sm"},j=(0,a.Uk)(" Minute "),X={class:"row col-5 q-pa-sm"},$=(0,a._)("div",{class:"col-12 q-pa-sm"},[(0,a._)("b",{style:{"font-size":"15px"}},"Date")],-1),ee={class:"col-12 q-pa-sm"},te=(0,a._)("div",{class:"text-h6"},"Alert",-1),le=(0,a._)("span",{class:"q-ml-sm"},"Remove this Setting?",-1);function ae(e,t,l,ae,ie,oe){const se=(0,a.up)("q-btn"),de=(0,a.up)("q-card"),ne=(0,a.up)("q-card-section"),re=(0,a.up)("q-select"),ue=(0,a.up)("q-card-actions"),me=(0,a.up)("q-dialog"),he=(0,a.up)("q-input"),ce=(0,a.up)("q-avatar"),pe=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",s,[(0,a._)("div",d,[(0,a._)("div",null,[n,(0,a.Uk)(" "+(0,i.zw)(e.profile.store_name),1)])]),(0,a._)("div",r,[(0,a._)("div",u,[m,(0,a.Uk)(" "+(0,i.zw)(e.todate),1)])])]),(0,a._)("div",h,[(0,a._)("div",c,[p,(0,a._)("div",_,[(0,a.Wm)(de,{class:"no-shadow q-pa-sm",style:{height:"73.5vh",overflow:"auto"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.tempSchedule,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l,class:"row q-pa-md",style:{"border-bottom":"2px solid #DEDEDE"}},[(0,a._)("div",y,[(0,a._)("div",g,(0,i.zw)(t.day_of_week),1),(0,a._)("div",null,[(0,a._)("b",null,(0,i.zw)(t.start_time)+" - "+(0,i.zw)(t.end_time),1)])]),(0,a._)("div",w,[(0,a.Wm)(se,{style:{width:"70px","font-size":"13px","text-transform":"lowercase",height:"20px","border-radius":"20px"},onClick:t=>(e.dialog=!0,e.setEditIndex(l)),dense:"",color:"green","text-color":"white",label:"Edit"},null,8,["onClick"])])])))),128))])),_:1})])]),(0,a._)("div",f,[(0,a._)("div",v,[x,(0,a.Wm)(se,{style:{"margin-left":"20px",width:"35px","border-radius":"50%"},onClick:t[0]||(t[0]=t=>e.dialog2=!0),dense:"",color:"green","text-color":"white",label:"+"})]),(0,a._)("div",b,[(0,a.Wm)(de,{class:"no-shadow",style:{height:"73.5vh",overflow:"auto"}},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{class:"no-shadow q-pa-sm",style:{height:"73.5vh"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.holidays,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l,class:"row q-pa-md",style:{"border-bottom":"2px solid #DEDEDE"}},[(0,a._)("div",H,[(0,a._)("div",S,(0,i.zw)(t.date),1),(0,a._)("div",null,[(0,a._)("b",null,(0,i.zw)(t.start_time)+" - "+(0,i.zw)(t.end_time),1)])]),(0,a._)("div",W,[(0,a.Wm)(se,{flat:"",onClick:l=>(e.dialog2=!0,e.editHoliday(t)),dense:"",color:"green","text-color":"black",icon:"edit"},null,8,["onClick"]),(0,a.Wm)(se,{flat:"",onClick:l=>(e.confirm=!0,e.holidayId=t.id),dense:"",color:"green","text-color":"black",icon:"delete"},null,8,["onClick"])])])))),128))])),_:1})])),_:1})])])]),(0,a.Wm)(me,{modelValue:e.dialog,"onUpdate:modelValue":t[7]||(t[7]=t=>e.dialog=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{style:{"max-width":"500px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,null,{default:(0,a.w5)((()=>[(0,a._)("div",k,(0,i.zw)(e.tempSchedule[e.index].day_of_week),1)])),_:1}),(0,a.Wm)(ne,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a._)("div",C,[q,(0,a._)("div",V,[U,(0,a.Wm)(re,{dense:"",filled:"",modelValue:e.time.start.hour,"onUpdate:modelValue":t[1]||(t[1]=t=>e.time.start.hour=t),options:e.getHours()},null,8,["modelValue","options"])]),(0,a._)("div",E,[D,(0,a.Wm)(re,{dense:"",filled:"",modelValue:e.time.start.minute,"onUpdate:modelValue":t[2]||(t[2]=t=>e.time.start.minute=t),options:e.getMinutes()},null,8,["modelValue","options"])])]),(0,a._)("div",M,[z,(0,a._)("div",O,[I,(0,a.Wm)(re,{dense:"",filled:"",modelValue:e.time.end.hour,"onUpdate:modelValue":t[3]||(t[3]=t=>e.time.end.hour=t),options:e.getHours()},null,8,["modelValue","options"])]),(0,a._)("div",T,[Z,(0,a.Wm)(re,{dense:"",filled:"",modelValue:e.time.end.minute,"onUpdate:modelValue":t[4]||(t[4]=t=>e.time.end.minute=t),options:e.getMinutes()},null,8,["modelValue","options"])])])])),_:1}),(0,a.Wm)(ue,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{flat:"",label:"Cancel",color:"primary",onClick:t[5]||(t[5]=t=>e.dialog=!1)}),(0,a.Wm)(se,{flat:"",label:"OK",color:"primary",onClick:t[6]||(t[6]=t=>e.setTime()),loading:e.loading},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(me,{modelValue:e.dialog2,"onUpdate:modelValue":t[15]||(t[15]=t=>e.dialog2=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{style:{"max-width":"500px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,null,{default:(0,a.w5)((()=>[Q])),_:1}),(0,a.Wm)(ne,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a._)("div",F,[A,(0,a._)("div",N,[G,(0,a.Wm)(re,{dense:"",filled:"",modelValue:e.holiday.start.hour,"onUpdate:modelValue":t[8]||(t[8]=t=>e.holiday.start.hour=t),options:e.getHours()},null,8,["modelValue","options"])]),(0,a._)("div",K,[J,(0,a.Wm)(re,{dense:"",filled:"",modelValue:e.holiday.start.minute,"onUpdate:modelValue":t[9]||(t[9]=t=>e.holiday.start.minute=t),options:e.getMinutes()},null,8,["modelValue","options"])])]),(0,a._)("div",L,[Y,(0,a._)("div",P,[B,(0,a.Wm)(re,{dense:"",filled:"",modelValue:e.holiday.end.hour,"onUpdate:modelValue":t[10]||(t[10]=t=>e.holiday.end.hour=t),options:e.getHours()},null,8,["modelValue","options"])]),(0,a._)("div",R,[j,(0,a.Wm)(re,{dense:"",filled:"",modelValue:e.holiday.end.minute,"onUpdate:modelValue":t[11]||(t[11]=t=>e.holiday.end.minute=t),options:e.getMinutes()},null,8,["modelValue","options"])])]),(0,a._)("div",X,[$,(0,a._)("div",ee,[(0,a.Wm)(he,{"bg-color":"white",min:e.todate,outlined:"",type:"date",modelValue:e.holiday.date,"onUpdate:modelValue":t[12]||(t[12]=t=>e.holiday.date=t),dense:""},null,8,["min","modelValue"])])])])),_:1}),(0,a.Wm)(ue,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{flat:"",label:"Cancel",color:"primary",onClick:t[13]||(t[13]=t=>(e.dialog2=!1,e.resetHolidayFrom()))}),(0,a.Wm)(se,{flat:"",label:"OK",color:"primary",onClick:t[14]||(t[14]=t=>e.saveHoliday()),loading:e.loading},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(me,{modelValue:e.alert,"onUpdate:modelValue":t[16]||(t[16]=t=>e.alert=t),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{class:(0,i.C_)(e.alertColor+" text-white"),style:{width:"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,null,{default:(0,a.w5)((()=>[te])),_:1}),(0,a.Wm)(ne,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.alertMessage),1)])),_:1}),(0,a.Wm)(ue,{align:"right",class:"bg-white text-teal"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(se,{flat:"",label:"OK"},null,512),[[pe]])])),_:1})])),_:1},8,["class"])])),_:1},8,["modelValue"]),(0,a.Wm)(me,{modelValue:e.confirm,"onUpdate:modelValue":t[18]||(t[18]=t=>e.confirm=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(de,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ne,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{icon:"delete",color:"primary","text-color":"white"}),le])),_:1}),(0,a.Wm)(ue,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(se,{flat:"",label:"Cancel",color:"primary"},null,512),[[pe]]),(0,a.Wm)(se,{flat:"",loading:e.loading,label:"Ok",onClick:t[17]||(t[17]=t=>e.removeHoliday()),color:"primary"},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}l(2100);var ie=l(3617),oe=new Date,se=oe.getFullYear()+"-"+(oe.getMonth()+1)+"-"+oe.getDate();const de=(0,a.aZ)({name:"StoreOperatingHours",computed:{...(0,ie.Se)("HubDec",{schedule:"GET_SCHEDULE",loading:"GET_HUB_DEC_LOADING",holidays:"GET_HOLIDAYS"}),...(0,ie.Se)("Auth",{profile:"GET_PROFILE"})},async mounted(){this.profile.store_id&&(await this.getStoreOperatingHours(),this.schedule.length>0&&(this.tempSchedule=JSON.parse(JSON.stringify(this.schedule))))},data:()=>({todate:se,dialog:!1,dialog2:!1,index:-1,tempSchedule:[{day_of_week:"Sunday",day:1,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Monday",day:2,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Tuesday",day:3,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Wednesday",day:4,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Thursday",day:5,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Friday",day:6,start_time:"01:23:00",end_time:"02:23:00"},{day_of_week:"Saturday",day:7,start_time:"01:23:00",end_time:"02:23:00"}],time:{start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"}},holiday:{start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"},date:""},alert:!1,alertMessage:"",alertColor:"bg-green",holidayEdit:!1,holidayId:-1,confirm:!1}),methods:{...(0,ie.nv)("HubDec",["setStoreOperatingHours","getStoreOperatingHours","createHoliday","updateHoliday","deleteHoliday"]),setEditIndex(e){this.index=e,this.time={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"}}},getHours(){var e=[];const t=(e,t)=>String(e).padStart(t,"0");for(let l=0;l<24;l++)e.push(t(l,2));return e},getMinutes(){var e=[];const t=(e,t)=>String(e).padStart(t,"0");for(let l=0;l<60;l++)e.push(t(l,2));return e},async setTime(){this.tempSchedule[this.index].start_time=this.time.start.hour+":"+this.time.start.minute+":00",this.tempSchedule[this.index].end_time=this.time.end.hour+":"+this.time.end.minute+":00",await this.save(),this.dialog=!1},async save(){console.log(this.tempSchedule),await this.setStoreOperatingHours({schedule:this.tempSchedule}).then((async e=>{e?(await this.getStoreOperatingHours(),this.tempSchedule=JSON.parse(JSON.stringify(this.schedule)),this.alert=!0,this.alertColor="bg-green",this.alertMessage="Successfully Updated!"):(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Failed to save, please try again.")})),this.time={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"}}},resetHolidayFrom(){this.holidayEdit=!1,this.holidayId=-1,this.holiday={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"},date:""}},async saveHoliday(){var e=parseInt(this.holiday.start.hour),t=parseInt(this.holiday.end.hour);e>t?(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Invalid date."):""==this.holiday.date?(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Please select date."):this.holidayEdit?await this.updateHoliday({start_time:this.holiday.date+" "+this.holiday.start.hour+":"+this.holiday.start.minute+":00",end_time:this.holiday.date+" "+this.holiday.end.hour+":"+this.holiday.end.minute+":00",id:this.holidayId}).then((async e=>{e?(await this.getStoreOperatingHours(),this.holiday={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"},date:""},this.dialog2=!1,this.alert=!0,this.alertColor="bg-green",this.alertMessage="Successfully Updated!"):(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Failed to save, please try again.")})):await this.createHoliday({start_time:this.holiday.date+" "+this.holiday.start.hour+":"+this.holiday.start.minute+":00",end_time:this.holiday.date+" "+this.holiday.end.hour+":"+this.holiday.end.minute+":00"}).then((async e=>{e?(await this.getStoreOperatingHours(),this.holiday={start:{hour:"00",minute:"00"},end:{hour:"00",minute:"00"},date:""},this.dialog2=!1,this.alert=!0,this.alertColor="bg-green",this.alertMessage="Successfully Created!"):(this.alert=!0,this.alertColor="bg-orange",this.alertMessage="Failed to save, please try again.")}))},editHoliday(e){var t=e.start_time.split(":"),l=e.end_time.split(":");this.holiday={start:{hour:t[0],minute:t[1]},end:{hour:l[0],minute:l[1]},date:e.date_y_m_d},this.holidayId=e.id,this.holidayEdit=!0},async removeHoliday(){await this.deleteHoliday({id:this.holidayId}).then((async e=>{e&&(this.holidayId=-1,await this.getStoreOperatingHours(),this.confirm=!1)}))}}});var ne=l(4260),re=l(151),ue=l(8240),me=l(6778),he=l(5589),ce=l(2448),pe=l(9367),_e=l(4842),ye=l(5096),ge=l(677),we=l(7518),fe=l.n(we);const ve=(0,ne.Z)(de,[["render",ae]]),xe=ve;fe()(de,"components",{QCard:re.Z,QBtn:ue.Z,QDialog:me.Z,QCardSection:he.Z,QSelect:ce.Z,QCardActions:pe.Z,QInput:_e.Z,QAvatar:ye.Z}),fe()(de,"directives",{ClosePopup:ge.Z})}}]);